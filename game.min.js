(()=>{"use strict";var e={554:(e,t,i)=>{i.d(t,{BI:()=>c,_s:()=>l,lq:()=>u});var s=i(718);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,h(s.key),s)}}function r(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=n(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var l=function(){return r((function e(t){o(this,e),this.property=t,this.parentNode=document.querySelector(".game"),this.el=document.createElement("div"),this.el.className="npc_box",this.npcCrash=!1,this.talkOn=!1,this.modal=document.querySelector(".quest_modal"),this.questStart=!1,this.questEnd=!1,this.init()}),[{key:"init",value:function(){var e='\n            <div class="talk_box">\n                '.concat(this.property.idleMessage,'\n            </div>\n            <div class="npc"></div>\n        ');this.el.innerHTML=e,this.el.style.left="".concat(this.property.positionX,"px"),this.parentNode.appendChild(this.el)}},{key:"position",value:function(){return{left:this.el.getBoundingClientRect().left,right:this.el.getBoundingClientRect().right,top:s.QM.screenHeight-this.el.getBoundingClientRect().top,bottom:s.QM.screenHeight-this.el.getBoundingClientRect().top-this.el.getBoundingClientRect().height}}},{key:"crash",value:function(){s.ZK.position().right>this.position().left&&s.ZK.position().left<this.position().right?this.npcCrash=!0:this.npcCrash=!1}},{key:"talk",value:function(){!this.talkOn&&this.npcCrash?(this.talkOn=!0,this.property.quest(),this.modal.classList.add("active")):this.talkOn&&(this.talkOn=!1,this.modal.classList.remove("active"))}}])}(),c=function(){return r((function e(){o(this,e),this.level=0,this.isStart=!1}),[{key:"stageGuide",value:function(e){var t=this;this.parentNode=document.querySelector(".game_app"),this.textBox=document.createElement("div"),this.textBox.className="stage_box",this.textNode=document.createTextNode(e),this.textBox.appendChild(this.textNode),this.parentNode.appendChild(this.textBox),setTimeout((function(){return t.textBox.remove()}),1500)}},{key:"callMonster",value:function(){for(var e=0;e<=10;e++)s.OR.arr[e]=10===e?new p(s.Vm.monster[this.level].bossMon,s.ZK.movex+s.QM.screenWidth+600*e):new p(s.Vm.monster[this.level].defaultMon,s.ZK.movex+s.QM.screenWidth+700*e)}},{key:"clearCheck",value:function(){var e=this;s.Vm.callPosition.forEach((function(t){s.ZK.movex>=t&&0===s.OR.arr.length&&(e.stageGuide("곧 몬스터가 몰려옵니다!"),s.Vm.callPosition.shift(),setTimeout((function(){e.callMonster(),e.level++}),1e3))}))}}])}(),u=function(){return r((function e(t){o(this,e),this.el=document.querySelector(t),this.movex=0,this.speed=7,this.direction="right",this.attackDamage=1e4,this.hpProgress=0,this.hpValue=2e5,this.defaultHpValue=this.hpValue,this.realDamage=0,this.slideSpeed=14,this.slideTime=0,this.slideMaxTime=30,this.slideDown=!1,this.level=1,this.exp=0,this.maxExp=3e3,this.expProgress=0}),[{key:"keyMotion",value:function(){s.Eb.keyDown.left?(this.direction="left",this.el.classList.add("run"),this.el.classList.add("flip"),this.movex=this.movex<=0?0:this.movex-this.speed):s.Eb.keyDown.right&&(this.direction="right",this.el.classList.add("run"),this.el.classList.remove("flip"),this.movex=this.movex+this.speed),s.Eb.keyDown.attack&&(s.R1.launch||(this.el.classList.add("attack"),s.R1.arr.push(new d),s.R1.launch=!0)),s.Eb.keyDown.slide&&(this.slideDown||(this.el.classList.add("slide"),"right"===this.direction?this.movex=this.movex+this.slideSpeed:this.movex=this.movex-this.slideSpeed,this.slideTime>this.slideMaxTime&&(this.el.classList.remove("slide"),this.slideDown=!0),this.slideTime+=1)),s.Eb.keyDown.left||s.Eb.keyDown.right||this.el.classList.remove("run"),s.Eb.keyDown.attack||(this.el.classList.remove("attack"),s.R1.launch=!1),s.Eb.keyDown.slide||(this.el.classList.remove("slide"),this.slideDown=!1,this.slideTime=0),this.el.parentNode.style.transform="translateX(".concat(this.movex,"px)")}},{key:"position",value:function(){return{left:this.el.getBoundingClientRect().left,right:this.el.getBoundingClientRect().right,top:s.QM.screenHeight-this.el.getBoundingClientRect().top,bottom:s.QM.screenHeight-this.el.getBoundingClientRect().top-this.el.getBoundingClientRect().height}}},{key:"size",value:function(){return{width:this.el.offsetWidth,height:this.el.offsetHeight}}},{key:"minusHp",value:function(e){this.hpValue=Math.max(0,this.hpValue-e),this.crash(),0===this.hpValue&&this.dead(),this.renderHp()}},{key:"plusHp",value:function(e){this.hpValue=e,this.renderHp()}},{key:"renderHp",value:function(){this.hpProgress=this.hpValue/this.defaultHpValue*100,document.querySelector(".state_box .hp span").style.width=this.hpProgress+"%"}},{key:"crash",value:function(){var e=this;this.el.classList.add("crash"),setTimeout((function(){return e.el.classList.remove("crash")}),400)}},{key:"dead",value:function(){s.ZK.el.classList.add("dead"),(0,s.Iz)()}},{key:"hitDamage",value:function(){this.realDamage=this.attackDamage-Math.round(Math.random()*this.attackDamage*.1)}},{key:"heroUpgrade",value:function(e){var t=null!=e?e:5e3;this.attackDamage+=t}},{key:"updateExp",value:function(e){this.exp+=e,this.expProgress=this.exp/this.maxExp*100,document.querySelector(".hero_state .exp span").style.width="".concat(this.expProgress,"%"),this.exp>=this.maxExp&&this.levelUp()}},{key:"levelUp",value:function(){this.level+=1,this.exp=0,this.maxExp=this.maxExp+1e3*this.level,document.querySelector(".level_box strong").innerText=this.level;var e=document.querySelector(".hero_box .level_up");e.classList.add("active"),setTimeout((function(){return e.classList.remove("active")}),1e3),this.updateExp(this.exp),this.heroUpgrade(),this.plusHp(this.defaultHpValue)}}])}(),d=function(){return r((function e(){o(this,e),this.parentNode=document.querySelector(".game"),this.el=document.createElement("div"),this.el.className="hero_bullet",this.x=0,this.y=0,this.speed=30,this.distance=0,this.bulletDirection="right",this.init()}),[{key:"init",value:function(){this.bulletDirection="left"===s.ZK.direction?"left":"right",this.x="right"===this.bulletDirection?s.ZK.movex+s.ZK.size().width/2:s.ZK.movex-s.ZK.size().width/2,this.y=s.ZK.position().bottom-s.ZK.size().height/2,this.distance=this.x,this.el.style.transform="translate(".concat(this.x,"px, ").concat(this.y,"px)"),this.parentNode.appendChild(this.el)}},{key:"moveBullet",value:function(){var e="";"left"===this.bulletDirection?(this.distance-=this.speed,e="rotate(180deg)"):this.distance+=this.speed,this.el.style.transform="translate(".concat(this.distance,"px, ").concat(this.y,"px) ").concat(e),this.crashBullet()}},{key:"position",value:function(){return{left:this.el.getBoundingClientRect().left,right:this.el.getBoundingClientRect().right,top:s.QM.screenHeight-this.el.getBoundingClientRect().top,bottom:s.QM.screenHeight-this.el.getBoundingClientRect().top-this.el.getBoundingClientRect().height}}},{key:"crashBullet",value:function(){for(var e=0;e<s.OR.arr.length;e++)if(this.position().left>s.OR.arr[e].position().left&&this.position().right<s.OR.arr[e].position().right)for(var t=0;t<s.R1.arr.length;t++)s.R1.arr[t]===this&&(s.ZK.hitDamage(),s.R1.arr.splice(t,1),this.el.remove(),this.damageView(s.OR.arr[e]),s.OR.arr[e].updateHp(e));if(this.position().left>s.QM.screenWidth||this.position().right<0)for(var i=0;i<s.R1.arr.length;i++)s.R1.arr[i]===this&&(s.R1.arr.splice(i,1),this.el.remove())}},{key:"damageView",value:function(e){var t=this;this.parentNode=document.querySelector(".game_app"),this.textDamageNode=document.createElement("div"),this.textDamageNode.className="text_damage",this.textDamage=document.createTextNode(s.ZK.realDamage),this.textDamageNode.appendChild(this.textDamage),this.parentNode.appendChild(this.textDamageNode);var i=-100*Math.random(),n=e.position().left+i,o=e.position().top;this.textDamageNode.style.transform="translate(".concat(n,"px, ").concat(-o,"px)"),setTimeout((function(){return t.textDamageNode.remove()}),500)}}])}(),p=function(){return r((function e(t,i){o(this,e),this.parentNode=document.querySelector(".game"),this.el=document.createElement("div"),this.el.className="monster_box ".concat(t.name),this.elChildren=document.createElement("div"),this.elChildren.className="monster",this.hpNode=document.createElement("div"),this.hpNode.className="hp",this.hpValue=t.hpValue,this.defaultHpValue=t.hpValue,this.hpInner=document.createElement("span"),this.progress=0,this.positionX=i,this.moveX=0,this.speed=t.speed,this.crashDamage=t.crashDamage,this.score=t.score,this.exp=t.exp,this.init()}),[{key:"init",value:function(){this.hpNode.appendChild(this.hpInner),this.el.appendChild(this.hpNode),this.el.appendChild(this.elChildren),this.parentNode.appendChild(this.el),this.el.style.left=this.positionX+"px"}},{key:"position",value:function(){return{left:this.el.getBoundingClientRect().left,right:this.el.getBoundingClientRect().right,top:s.QM.screenHeight-this.el.getBoundingClientRect().top,bottom:s.QM.screenHeight-this.el.getBoundingClientRect().top-this.el.getBoundingClientRect().height}}},{key:"updateHp",value:function(e){this.hpValue=Math.max(0,this.hpValue-s.ZK.realDamage),this.progress=this.hpValue/this.defaultHpValue*100,this.el.children[0].children[0].style.width=this.progress+"%",0===this.hpValue&&this.dead(e)}},{key:"dead",value:function(e){var t=this;this.el.classList.add("remove"),s.OR.arr.splice(e,1),setTimeout((function(){return t.el.remove()}),200),this.setScore(),this.setExp()}},{key:"moveMonster",value:function(){this.moveX+this.positionX+this.el.offsetWidth+s.ZK.position().left-s.ZK.movex<=0?this.moveX=s.ZK.movex-this.positionX+s.QM.screenWidth-s.ZK.position().left:this.moveX-=this.speed,this.el.style.transform="translateX(".concat(this.moveX,"px)"),this.crash()}},{key:"crash",value:function(){s.ZK.position().right-30>this.position().left&&s.ZK.position().left+90<this.position().right&&s.ZK.minusHp(this.crashDamage)}},{key:"setScore",value:function(){s.Vm.totalScore+=this.score,document.querySelector(".score_box").innerText=s.Vm.totalScore}},{key:"setExp",value:function(){s.ZK.updateExp(this.exp)}}])}()},718:(e,t,i)=>{i.d(t,{Eb:()=>l,Iz:()=>f,OR:()=>c,QM:()=>m,R1:()=>u,Vm:()=>p,ZK:()=>s,mt:()=>o,wr:()=>n});var s,n,o,a=i(554),r=i(724),h=i(84),l={keyDown:{},keyValue:{37:"left",39:"right",88:"attack",67:"slide",13:"enter"}},c={arr:[]},u={launch:!1,arr:[]},d={gameBox:document.querySelector(".game")},p={stage:[],totalScore:0,monster:[{defaultMon:r.M2,bossMon:r.rc},{defaultMon:r.Tl,bossMon:r.k3},{defaultMon:r.xw,bossMon:r.yO}],callPosition:[1e3,5e3,9e3]},m={screenWidth:window.innerWidth,screenHeight:window.innerHeight,gameOver:!1},g=function(){s.keyMotion(),v(),n.crash(),o.crash(),u.arr.forEach((function(e,t){e.moveBullet()})),c.arr.forEach((function(e,t){e.moveMonster()})),p.stage.clearCheck(),window.requestAnimationFrame(g)},f=function(){m.gameOver=!0,l.keyDown.left=!1,l.keyDown.right=!1,document.querySelector(".game_over").classList.add("active")},v=function(){var e=Math.min(0,-1*(s.movex-m.screenWidth/3));d.gameBox.style.transform="translateX(".concat(e,"px)")},y=function(){s=new a.lq(".hero"),p.stage=new a.BI,n=new a._s(h.H),o=new a._s(h.v),["./images/ninja_attack.png","./images/ninja_run.png"].forEach((function(e){(new Image).src=e})),window.addEventListener("keydown",(function(e){m.gameOver||(l.keyDown[l.keyValue[e.which]]=!0),l.keyDown.enter&&(n.talk(),o.talk())})),window.addEventListener("keyup",(function(e){l.keyDown[l.keyValue[e.which]]=!1})),window.addEventListener("resize",(function(e){m.screenWidth=window.innerWidth,m.screenHeight=window.innerHeight})),g()};window.onload=function(){y()}},724:(e,t,i)=>{i.d(t,{M2:()=>o,Tl:()=>n,k3:()=>r,rc:()=>a,xw:()=>s,yO:()=>h});var s={name:"pink_mon",hpValue:2e5,speed:3,crashDamage:300,score:3e3,exp:3e3},n={name:"yellow_mon",hpValue:84e3,speed:3,crashDamage:300,score:2e3,exp:2e3},o={name:"green_mon",hpValue:44e3,speed:3,crashDamage:300,score:1e3,exp:1e3},a={name:"green_mon_boss",hpValue:8e5,speed:2,crashDamage:1e3,score:1e4,exp:1e4},r={name:"yellow_mon_boss",hpValue:18e5,speed:2,crashDamage:2e3,score:2e4,exp:2e4},h={name:"pink_mon_boss",hpValue:52e5,speed:1,crashDamage:1e3,score:3e4,exp:3e4}},84:(e,t,i)=>{i.d(t,{H:()=>n,v:()=>o});var s=i(718),n={positionX:4500,idleMessage:"<p>큰일이야..<br>사람들이 좀비로<br>변하고 있어..<br><span>대화 Enter</span></p>",quest:function(){var e={start:"마을에 몬스터가 출몰해 주민들을 좀비로 만들고 있어.. 몬스터를 사냥해 주민을 구하고 <span>레벨을 ".concat(5,"이상</span>으로 만들어 힘을 증명한다면 좀비왕을 물리칠 수 있도록 내 힘을 빌려줄게!!"),ing:"이런 아직 레벨을 달성하지 못했구나..",suc:"레벨을 달성했구나! 힘을 줄게!",end:"고마워! 행운을 빌어!"},t="";s.wr.questStart?s.wr.questStart&&!s.wr.questEnd&&s.ZK.level<5?t=e.ing:s.wr.questStart&&!s.wr.questEnd&&s.ZK.level>=5?(t=e.suc,s.wr.questEnd=!0,s.ZK.heroUpgrade(5e4)):s.wr.questStart&&s.wr.questEnd&&(t=e.end):(t=e.start,s.wr.questStart=!0);var i='\n            <figure class="npc_img">\n                <img src="./images/npc.png"/>\n            </figure>\n            <p>'.concat(t,"</p>\n        ");document.querySelector(".quest_modal .inner_box .quest_talk").innerHTML=i}},o={positionX:8500,idleMessage:"<p>곧 좀비왕이 부활하려고해..<br><span>대화 Enter</span></p>",quest:function(){var e={start:"마을에 몬스터가 출몰해 주민들을 좀비로 만들고 있어.. 몬스터를 사냥해 주민을 구하고 <span>레벨을 ".concat(7,"이상</span>으로 만들어 힘을 증명한다면 좀비왕을 물리칠 수 있도록 내 힘을 빌려줄게!!"),ing:"이런 아직 레벨을 달성하지 못했구나..",suc:"레벨을 달성했구나! 힘을 줄게!",end:"고마워! 행운을 빌어!"},t="";s.mt.questStart?s.mt.questStart&&!s.mt.questEnd&&s.ZK.level<7?t=e.ing:s.mt.questStart&&!s.mt.questEnd&&s.ZK.level>=7?(t=e.suc,s.mt.questEnd=!0,s.ZK.heroUpgrade(7e4)):s.mt.questStart&&s.mt.questEnd&&(t=e.end):(t=e.start,s.mt.questStart=!0);var i='\n            <figure class="npc_img">\n                <img src="./images/npc.png"/>\n            </figure>\n            <p>'.concat(t,"</p>\n        ");document.querySelector(".quest_modal .inner_box .quest_talk").innerHTML=i}}}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,i),o.exports}i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);i(718)})();